---
description: 在将引入 Wave 前的准备
---

# 提前准备

* 为了使Mobingi的每日报告分析有效、将讲解需要用在您的AWS账户的执行任务和需要提交给Mobingi的信息。
* 作业后提交给Mobingi的信息如下。 请您记录每个阶段的作业。 （作业后也可以确认。\)

```text
- AWS账户ID（12位数）

- 已创建的报告的信息

    - 报告名

    - S3存储桶

    - レポートパスのプレフィックス、またはレポートのパス
    - 报告路径的Prefix，或报告路径

- 授权指定存储桶用的IAM角色的ARN (例如: arn:aws:iam::xxxxxxxxxxxx:role/crossacounnt-access-for-mobingi)
```

## 步骤1：创建S3存储桶以及每日报告（任意） {#step1}

* 使用支付信息共享的AWS账户创建每日报告。
* 如果您已有以下报告书定义条件，可跳过此操作。

  `时间单位: 每天`

  `报告含有的项目 资源ID将有效`

  `在存储桶中不包含Mobingi不能浏览的对象（为了给整个存储桶阅读访问权）`

### 步骤1-1：创建S3存储桶

* 从S3控制台中用任意的名称创建存储桶。 选项可为默认值。

  因要使用此为报告书的输出目标，请抄件存储桶名称。

### 步骤1-2：创建每日报告

* 从AWS管理控制台中，打开“账单信息和成本管理仪表盘”，转到报告菜单内。

进行创建报告。

![](../.gitbook/assets/snip20180730_1.png)

* 在“第1步：详细项目的选择”页面，请填写以下内容进行下一步。
  * 报告名称：任意
  * 时间单位： **每天**
  * 包含: 选择 **资源ID**
  * 启用支持: 任意

![](../.gitbook/assets/bill_002.png)

* 在“第2步：选择交付选项”页面，为包括S3存储桶的操作，按以下步骤进行。
  * 输入S3存储桶（之前创建的）名称
  * 示例策略显示和复制（※请务必在填写S3存储桶名称后在显示）

![](../.gitbook/assets/bill_003.png)

![](../.gitbook/assets/bill_004.png)

* 复制样本策略后，打开**先前创建的S3存储桶** 的详细信息。（※建议在另一个标签或窗口上操作）
* 在S3中，按“访问权限”&gt;&gt;“存储桶策略”操作菜单。
* 在存储桶策略编辑器中，适用之前的样本策略

![](../.gitbook/assets/bill_005.png)

返回到“第2步：选择内容”，输入以下项目并进行下一步。

* 报告路径的Prefix：任意（※也可忽略）
* 圧缩：任意

如果存储桶策略不正确，在验证不会成为“有效桶”。

请再次确认S3菜单。

![](../.gitbook/assets/bill_006.png)

检查“第3步：确认”的显示内容中是否有错误并点击完成。

![](../.gitbook/assets/bill_007.png)

## 步骤2：创建一个授权Mobingi可以阅读的IAM角色 {#step2}

从AWS管理控制台中，打开IAM服务并转到“角色”&gt;&gt;“创建角色”菜单。

![](../.gitbook/assets/role_001.png)

在“选择可信用的实体类型”中选择“其他的AWS账户”，输入下面的Mobingi账户ID。

* Mobingi账户ID： 131920598436

![](../.gitbook/assets/role_002.png)

在“附加访问权限策略”菜单中，选择“制定策略”。

![](../.gitbook/assets/role_003-1.png)

由于在另一个标签（窗口）中打开“创建策略”菜单，选择JSON作为输入格式，以以下的内容输入策略。请将 Resource的`{replace_to_report_bucket}`部分置换为 **要使用的报告的存储桶名称**。

```bash
{
    "Version": "2012-10-17",
   "Statement": [
         {
               "Effect": "Allow",
               "Action": [
                     "s3:GetObject",
                     "s3:HeadObject"
               ],
               "Resource": "arn:aws:s3:::{replace_to_report_bucket}/*"
         }
   ]
}
```

![](../.gitbook/assets/role_004.png)

进入“确认策略”，输入以下项目并创建策略。

* 姓名： 任意\(※必須\)
* 描述：任意

![](../.gitbook/assets/role_005.png)

返回“创建角色”菜单并更新列表，显示之前创建的策略。 激活选项，进入下一步确认。

![](../.gitbook/assets/role_006.png)

在“确认”菜单中，输入以下项目。

* 角色名称：任意（\*必填）
* 角色描述：可选

确认是否已适用“可信用实体”和“策略”，并创建一个角色。

![](../.gitbook/assets/role_007.png)

记录已创建的角色的ARN。

![](../.gitbook/assets/role_008-1.png)

